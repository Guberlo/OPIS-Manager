<div class="container-fluid">

  <div class="row">

    <div class="col-12 text-center">

      <br>
      <p>Scegli un dipartimento:</p>

      <select class="btn btn-opis" (change)="getAllCdsOfSelectedDepartment($event.target.value)">
        <option>--</option>
        <option *ngFor="let department of departments" [value]="department.id"> {{ department.nome }} </option>
      </select>

    </div>

  </div>

  <br>

  <div class="row">
    <div class="col-12">

      <br><br>

      <ul class="nav nav-tabs" id="tabs">
        <li class="nav-item tabs_button" *ngFor="let c of cds">
          <button class="btn btn-opis" (click)="getAllTeachingsOfSelectedCds(c.id)"
            [ngClass]="selectedCds === c.id ? 'selected-tab' : ''">{{ c.nome + " " + c.classe }}</button>
        </li>
      </ul>

      <br>

      <div [hidden]="!selectedCds">
        <div class="container-switcher">
          <div class="segmented">
            <label (click)="enableOption(0);" [ngClass]="currentOption === 0 ? 'checked' : ''"><span>Corso di Studio</span></label>
            <label (click)="enableOption(1)" [ngClass]="currentOption === 1  ? 'checked' : ''"><span>Anno accademico</span></label>
            <label (click)="enableOption(2)" [ngClass]="currentOption === 2  ? 'checked' : ''"><span>Insegnamento</span></label>
          </div>
        </div>

        <br>

        <!-- Corso di Studio -->
        <div [hidden]="currentOption !== 0">
          <div id="corso-studio"></div>
        </div>

        <!-- Anno Accademico -->
        <div [hidden]="currentOption !== 1">
          <div class="text-center">
            <div class="list-option-container">
              Seleziona anno:
              <br>
              <select
                class="btn btn-opis text-center switch-years"
                [(ngModel)]="selectedYear"
                (ngModelChange)="getSchedeOfCdsForSelectedYearAndShowAcademicYearChart()"
              >
                <option class="text-center">--</option>
                <option class="text-center" *ngFor="let year of config.years" [ngValue]="year"> {{ year }} </option>
              </select>
            </div>
          </div>

          <div [hidden]="!selectedYear">
            <div>
              <ul class="nav nav-tabs" id="tabs">
                <li class="nav-item tabs_button"><button class="btn btn-opis" (click)="switchVal(1)" [ngClass]="switcherValues === 1 ? 'selected-tab' : ''">V1</button></li>
                <li class="nav-item tabs_button"><button class="btn btn-opis" (click)="switchVal(2)" [ngClass]="switcherValues === 2 ? 'selected-tab' : ''">V2</button></li>
                <li class="nav-item tabs_button"><button class="btn btn-opis" (click)="switchVal(3)" [ngClass]="switcherValues === 3 ? 'selected-tab' : ''">V3</button></li>
                <li>
                  <div class="input-group addons-bar">
                    <div class="input-group-prepend">
                      <span class="input-group-text selected-tab" id="basic-addon1">
                        <fa-icon [icon]="faSearch" size="lg" class="opis-icon"></fa-icon>
                      </span>
                    </div>

                    <input
                      type="text"
                      class="form-control"
                      placeholder="Fondamenti..."
                      aria-describedby="basic-addon1"
                      [(ngModel)]="subject"
                      (change)="getSchedeOfCdsForSelectedYearAndShowAcademicYearChart()"
                    >
                  </div>
                </li>
              </ul>

              <br>
              <div>Colore per numerosit√† di schede <strong>MIN - <div class="color-bar"></div> - MAX</strong></div>

              <br>
              <app-value-details [switcher]="switcherValues"></app-value-details>

              <!-- Anno Accademico canvas -->
              <div id="v1" [hidden]="switcherValues != 1"><canvas id="v1-canvas"></canvas></div>
              <div id="v2" [hidden]="switcherValues != 2"><canvas id="v2-canvas"></canvas></div>
              <div id="v3" [hidden]="switcherValues != 3"><canvas id="v3-canvas"></canvas></div>
            </div>
          </div>

        </div>
        <!-- end Anno Accademico -->


        <!-- Insegnamento -->
        <div [hidden]="currentOption !== 2">
          <div class="text-center">
            <div class="list-option-container">
              Seleziona insegnamento:
              <br>
              <select
                class="btn btn-opis text-center"
                id="selTeaching"
                [(ngModel)]="selectedTeaching"
                (ngModelChange)="getSchedeOfSelectedTeachingAndShowTeachingChart()"
              >
                <option class="text-center">--</option>
                <option class="text-center" *ngFor="let teaching of teachings" [ngValue]="teaching.id+' '+teaching.canale">
                  {{ teaching.nome }} {{ teaching.canale != 'no' && teaching.canale != '' ? '('+teaching.canale+')' : '' }}
                </option>
              </select>
            </div>
          </div>

          <div>
            <div [hidden]="(currentOption === 2 && !selectedTeaching) || (!selectedYear && !selectedTeaching)">
              <ul class="nav nav-tabs" id="tabs">
                <li class="nav-item tabs_button"><button class="btn btn-opis" (click)="switchVal(1)" [ngClass]="switcherValues === 1 ? 'selected-tab' : ''">V1</button></li>
                <li class="nav-item tabs_button"><button class="btn btn-opis" (click)="switchVal(2)" [ngClass]="switcherValues === 2 ? 'selected-tab' : ''">V2</button></li>
                <li class="nav-item tabs_button"><button class="btn btn-opis" (click)="switchVal(3)" [ngClass]="switcherValues === 3 ? 'selected-tab' : ''">V3</button></li>
                <li class="nav-item-right tabs_button" (click)="toggleStats()"><button class="btn btn-opis">Stats</button></li>
              </ul>

              <br>

              <div id="teaching-stats" *ngIf="selectedTeaching !== null">
                <div [hidden]="!showTeachingStats" class="card" style="margin-bottom: 20px;">
                  <div class="card-body">
                    <h5 class="card-title">Codice Insegnamento: <b>{{ selectedTeaching && selectedTeaching.split(" ")[0] }}</b></h5>
                    <p class="card-text" id="v1-stats" [hidden]="switcherValues !== 1"></p>
                    <p class="card-text" id="v2-stats" [hidden]="switcherValues !== 2"></p>
                    <p class="card-text" id="v3-stats" [hidden]="switcherValues !== 3"></p>
                  </div>
                </div>
              </div>

              <app-value-details [switcher]="switcherValues"></app-value-details>

              <div id="v1-teaching" [hidden]="switcherValues != 1"></div>
              <div id="v2-teaching" [hidden]="switcherValues != 2"></div>
              <div id="v3-teaching" [hidden]="switcherValues != 3"></div>
            </div>
          </div>

          <br>
          <br>

          <div class="custom-slider">
            <ng5-slider class="addons-bar slider-years"
              [(value)]="minValue"
              [(highValue)]="maxValue"
              [options]="optionsSlider"
              [hidden]="currentOption != 2 || !selectedTeaching"
              [manualRefresh]="manualRefresh"
              (valueChange)="getSchedeOfSelectedTeachingAndShowTeachingChart()"
            ></ng5-slider>
          </div>

        </div>
        <!-- end Insegnamento -->

        <br>
        <br>
        <br>

      </div>

    </div>
  </div>

</div>
